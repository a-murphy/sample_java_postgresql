language: java

jdk:
 - oraclejdk7
 - openjdk6
 - openjdk7
 
services:
  - postgres

build:
  pre_ci_boot:
    image_name: drydock/u14all
    image_tag: prod
    pull: true
  ci:
 #   - sudo -u postgres /usr/lib/postgresql/9.4/bin/postgres -c config_file=/etc/postgresql/9.4/main/postgresql.conf
  #  - source /init
  #  - source $HOME/.gvm/scripts/gvm
  #  - export GOPATH=/root
  #  - gvm use go$SHIPPABLE_GO_VERSION
  #  - export GOPATH=/root
  #  - go get -t -d -v ./...
  #  - start_redis
    - start_postgres
    - mkdir -p ./shippable/buildoutput
    - terraform --version
    - packer version
    - gradle clean build
    - gradle test
    - gradle cobertura
 
notifications:
 email: 
   on_success: always


